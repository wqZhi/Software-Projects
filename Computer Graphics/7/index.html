<!DOCTYPE html>
<html>
    
<!-- CS559 Workbook Pages - page content &copy; 2021, Michael Gleicher -->
<!-- This page is part of a Workbook developed for the 
    CS559 Computer Graphics Class at the University of Wisconsin
    https://graphics.cs.wisc.edu/Courses/559-sp2021/ -->
    <head>
	<meta name="generator" content="Hugo 0.68.3" />
        <meta charset="UTF-8">
        <link rel="stylesheet" href="./css/workbook.css">
        <script src="./js/resizeIFrames.js"></script>
    </head>
    <body>
        <div class="container container--outer"><div class="maincolumn">


<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">Workbook 7: Transformation and Hierarchy in Three.js</h1>
	</header>
	<div class="content main__content clearfix">
        

        
            <p>This week, we&rsquo;ll continue to do more THREE programming, with a focus on using THREE&rsquo;s mechanisms for transformation and hierarchy to make more interesting things.</p><p>This workbook is due on Monday, March 28, 2022.</p>
<h2>Learning Goals</h2>
<ol>
    <li>To gain some experience doing hierarchical modeling, particularly for animation</li>
    <li>To get some practice working with 3D rotations</li>
    <li>To get some experience working with the CS559 framework code</li>
    <li>To get more practice working with a modern scene graph API</li>
    <li>To see some details of how different rotation representation are used</li>
    <li>To get some exposure to modern JavaScript features like classes</li>
    <li>To get some experience working with another personâ€™s code</li>
</ol>

            <h2 id="warnings-to-start">Warnings to Start&hellip;</h2>
<p>This workbook is a little &ldquo;bigger&rdquo; than some of the others: you need to make a number of objects. This will give you more practice at making things. Most students like making stuff - it&rsquo;s one of the fun parts of doing graphics.</p>
<p>But there is also some substantial content: we will try to understand transformations in 3D, we will get more practice using the specific 3D API (THREE.js) and how it implements transformations and other things, and you&rsquo;ll use the class software framework that will help make UIs for building things in THREE.js.</p>
<p>Also&hellip; in this workbook, you are required to fill out text files on some pages explaining what your assignment does. On page 6, 8 and 9 it isn&rsquo;t enough to do the work: you must also edit the text file and tell us.</p>
<h2 id="required-and-recommended-reading">Required and Recommended Reading</h2>
<p><strong>Required</strong>: (in general, we discuss the key topics in lecture - these reinforce them)</p>
<ul>
<li><a href="https://canvas.wisc.edu/files/23924301/download?download_frd=1">FCG Chapter 12</a></li>
<li><a href="https://canvas.wisc.edu/files/23924370/download?download_frd=1">Hart, Chapter 7</a> is written in terms of explicit matrix stacks (which we did with Canvas2D), but gives examples on how to think about hierarchical modeling</li>
</ul>
<p><strong>Optional</strong>:</p>
<ul>
<li><a href="https://canvas.wisc.edu/files/23924488/download?download_frd=1">Hart, Chapter 8</a> can help you if you want to see viewing another way (this was also optional in the last workbook).</li>
<li><a href="https://canvas.wisc.edu/files/23924293/download?download_frd=1">The Real Time Rendering Book</a> has a very thorough discussion of transformations in sections 1-3, with significant attention paid to rotations and Quaternions (Section 4.3). This material is beyond what you need for class, but may be a good thing to read if you want a better understanding of 3D transformations.</li>
</ul>
<p><strong>From the previous workbook, but still relevant</strong>:</p>
<ul>
<li><a href="https://canvas.wisc.edu/files/23924322/download?download_frd=1">FCG Chapter 6</a> 6.2, 6.3, 6.4, and 6.5:</li>
<li><a href="https://canvas.wisc.edu/files/23924323/download?download_frd=1">FCG Chapter 7</a></li>
<li><a href="https://canvas.wisc.edu/files/23924331/download?download_frd=1">Hart, Chapter 6</a></li>
</ul>
<p>The readings are here to help you understand the things we discussed in class.</p>
<p>Over the course of this assignment, you will probably need to read a lot of the <a href="https://cs559.github.io/ThreeDocs_r137/docs/" target="_blank">THREE.js Documentation</a>. Unfortunately, this documentation isn&rsquo;t good to read - it&rsquo;s fine for when you need to look things up. So expect to read a lot of pages as you do more programming. Notice that the documentation link we give is to our own copy. If you search for info on THREEJS, you will get links to the <a href="https://threejs.org/docs/">&ldquo;official&rdquo;</a> version, which is for a newer version of THREE. It probably isn&rsquo;t an issue.</p>


<details class="myexpand" >
    <summary class="myexpand-head">A Note on THREE versions</summary>
    <div class="markdown-inner myexpand-content">
      <div class="dimbox">
<p>In class, we use the same version of three to use for the whole semester, to avoid switching versions in the middle. That way the workbooks all use the same, consistent version.</p>
<p>When we chose for Spring 2022, we chose version r137. This is already not the most recent release (you can see what changed on the <a href="https://github.com/mrdoob/three.js/releases">THREE Releases Page</a>). The differences probably do not matter for class.</p>
<p>Because the official documentation is for the most recent version, if you look at the <a href="https://threejs.org/docs/">&ldquo;official&rdquo;</a> docs, you will see something newer than what we provide at <a href="https://cs559.github.io/ThreeDocs_r137/docs/" target="_blank">THREE.js Documentation</a>. Either is probably fine.</p>
<p>You can see information about the version of THREE we provide at <a href="https://github.com/CS559/CS559-Three">The CS559 THREE GitHub Repo</a>. Of particular note: we provide typing information for THREE, and we provide a subset of the overall library (since it gets cloned into a workbook for every student).</p>
</div>

    </div>
</details>

<p>You will also start working with the class framework code. This will require you to spend some time reading the code and its documentation (which is derived from comments in the code). It may also cause you to need to read up on some aspects of JavaScript we haven&rsquo;t used much in class yet. The framework code will be discussed on page 7.</p>
<p>Hierarchical modeling is discussed briefly in section 2 of <a href="https://canvas.wisc.edu/files/23924301/download?download_frd=1">FCG4_Ch12.pdf (0.9mb)</a> and <a href="https://canvas.wisc.edu/files/23924370/download?download_frd=1">Hart07-jan19.pdf (14.5mb)</a>. In both cases, the focus is more on how you implement the scene graph traversal using transformation stacks than how to think in terms of hierarchical models. In the workbooks, we&rsquo;ll let THREE do this work for us. However, the stack model is discussed in lecture, and you should understand it.</p>
<p>The lookfrom/lookat/vup transformation is called the &ldquo;The Camera Transformation&rdquo; in section 1.3 of <a href="https://canvas.wisc.edu/files/23924323/download?download_frd=1">FCG4_Ch07.pdf (0.5mb)</a>. Other things in the chapter discuss the Perspective Transformation in depth (no pun intended), and can help you understand these concepts better. Hart discusses lookfrom/lookat in <a href="https://canvas.wisc.edu/files/23924488/download?download_frd=1">Hart08-jan19.pdf (1.7mb)</a>, but it adds little beyond what you&rsquo;ve seen already. Look at it if you want to see it explained a different way. These topics will also be discussed in the lectures.</p>
<h2 id="exercises">Exercises</h2>
<p>The main exercises for this workbook are:</p>
<ul>
<li>Rotation Toys - We are giving you demos to play with. You should use them to help build your intuitions as to how 3D rotations work (or do not work) as the case may be.</li>
<li>The Quadcopter / Aircraft - you get to make a quadcopter again, this time in 3D. It&rsquo;s a hierarchical model. And you&rsquo;ll need to show that you can use a &ldquo;lookat&rdquo; transformation.</li>
<li>Graphics Park - before we get to Graphics Town, we&rsquo;ll start smaller. This is a chance to animate some hierarchical objects in 3D and figure out the framework code.</li>
<li>Construction Equipment - another chance to use the framework code and make a different kind of hierarchical object.</li>
</ul>
<p>Over the next few weeks, we&rsquo;ll be using the framework code to make increasingly interesting objects. The idea is that by the end of the semester, all of the objects you make can fit together into Graphics Town.</p>
<h2 id="rubric-for-grading">Rubric for Grading</h2>
<p>There are lots of opportunities for advanced points on this assignment, but we limit the total number you can earn for this workbook. However, we do keep track of your &ldquo;excess points&rdquo; and may consider them if you are at a borderline at the end.</p>
<p>Also, the objects that you make using the framework will be usable in the future: we will use the framework for all of the future assignments, including the final &ldquo;Graphics Town&rdquo; assignment. If you make nice objects now, you can use them again.</p>
<p>Hopefully, you are making really cool stuff because you like making cool stuff and are learning from doing it, not just because we are giving you a few points.</p>

<div class="page-rubric-container">
<details class="page__rubric">
<summary>Workbook Rubric (97 points total)</summary>
<br/>
<div class="page-rubric-grid">
        <div class="page-rubric-grid-header rubric-box-regular">Points (86):</div><div class="page-rubric-grid-box rubric-box-regular"></div>
            <div class="page-rubric-grid-points rubric-box-regular">40 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">Correct hand-in (includes handin quiz)</div><div class="page-rubric-grid-box rubric-box-regular">Page 2</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">experimenting with the demos on page 2. (Weâ€™ll just trust that youâ€™ve done it if you turn any other part in.)</div><div class="page-rubric-grid-box rubric-box-regular">Page 3</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">experimenting with the demos on page 3. (Weâ€™ll just trust that youâ€™ve done it if you turn any other part in.)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">Some aircraft that isnâ€™t a donut</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">A propeller that spins (not the body)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">More than one propeller spinning (per aircraft)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">(at least) One aircraft that flies in a circle (or curved path)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">aircraft points forward as it moves</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">multiple aircraft both moving, both with propellers</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">Radar dish (or some object)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">Radar correctly points at aircraft (tracks as aircraft moves)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">take out bouncing cube</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">place at least 1 more swing</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">place carousel</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">carousel has poles and &#39;&#39;horses&#39;&#39;</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">carousel has correct motion (spins, horses go up and down)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">another moving object</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">equipment 1 is identifiable (can tell what it is)</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">equipment 2 is identifiable</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">equipment 1 has correct articulation</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">equipment 2 has correct articulation</div><div class="page-rubric-grid-box rubric-box-regular">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-regular">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-regular">UI works for 1&amp;2</div>
    <div class="page-rubric-grid-header rubric-box-bonus">Advanced points (25 possible, of which you can earn a maximum of 11):</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">cool aircraft</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">more complex motion</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">multiple types of aircraft</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-06-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">other cool features (students came up with some great things in 2D!)</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">fancier looking carousel</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">more theme park rides (1st of up to 3 with hierarchical motion - 2 pts)</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">more theme park rides (2nd of up to 3 with hierarchical motion - 2 pts)</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-08-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">more theme park rides (3rd of up to 3 with hierarchical motion - 2 pts)</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">3 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">third machine identifyable with working articulation</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">nice shapes</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">good use of colors/materials</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">more than the minimum degrees of freedom on the objects</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">1 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">at least one object has 4&#43; d.o.f. (beyond position/orientation)</div><div class="page-rubric-grid-box rubric-box-bonus">Box 07-09-01</div>
            <div class="page-rubric-grid-points rubric-box-bonus">2 pt</div>
            <div class="page-rubric-grid-desc rubric-box-bonus">other coolness</div></div>
</details>
</div>

        
        
        
        
        <h3 class="get__started">Get started on 
            <a href="./docs/1/">Page &nbsp;1&nbsp; (Rotations in 3D)</a>!</h3>
        
	</div>
</main>

                </div>
                <div class="sidebar">
<h2 class="Side_Title">Workbook 7: Transformation and Hierarchy in Three.js</h2>
<p class="Side__Note">Pages:</p>
<ul class="Side__List">
    <li class="Side__Item Side__Selected">Index (Transformation and Hierarchy in THREE.JS) </li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/1/">1: Rotations in 3D </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/2/">2: Euler Angles Toy </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/3/">3: Comparing Incremental Rotations </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/4/">4: Quaternions </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/5/">5: Hierarchical Modeling in THREE </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/6/">6: Exercise 1: Quadcopter / Multi-Rotor </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/7/">7: The CS559 Framework Code (GraphicsTown) </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/8/">8: Exercise 2: Graphics Park </a></li>
        <li class="Side__Item Side__Unselected"> <a href="./docs/9/">9: Exercise 3: Construction Site </a></li>
</ul>
</div>
</div>
    </body>
</html>
